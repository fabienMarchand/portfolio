"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[1453],{34624:(e,t,n)=>{n.d(t,{o:()=>r,w:()=>a});const a=3e5,r=3e5},27981:(e,t,n)=>{let a,r,o;n.d(t,{GA:()=>o,mJ:()=>a,zk:()=>r}),function(e){e.BANNER="banner",e.BUTTON="button",e.BRANDDISCOVER="brandDiscover",e.CHANNELSGRID="channelsGrid",e.CONTENTGRID="contentGrid",e.CONTENTROW="contentRow",e.IMAGE="image",e.OFFERHIGHLIGHT="offerHighlight",e.PROGRAMSHIGHTLIGHT="programsHighlight",e.PLAINTEXTHTML="plainTextHTML",e.REBOUNDPRODUCT="reboundProduct",e.SEPARATOR="separator",e.TABS="tabs",e.TEXT="text",e.TILES="tiles",e.WALL="wall"}(a||(a={})),function(e){e.PARAGRAPH="paragraph",e.SUBTITLE="subtitle",e.TITLE="title",e.TITLE2="title2"}(r||(r={})),function(e){e.INLINE="inline",e.PLAIN="plain",e.PRIMARY="primary"}(o||(o={}))},51453:(e,t,n)=>{n.d(t,{jc:()=>O,aP:()=>x});var a=n(7948),r=n(2784),o=n(82066),i=n(34624),s=n(99854),l=n(10859),c=n(23784),d=n(55877),u=n.n(d),p=n(48879),g=n(3444),v=n(7782),m=n(80561),L=n(30043),P=n(51626);const y=Object.keys(P.Q).map((e=>({template:e,message:`Problem fetching data for ${e}`}))),T={template:"default",message:"Something went wrong in this request"};var f=n(17147),h=n(59909),b=n(98101),C=n(20337);const k=e=>{var t;const n=(0,h.Z)(e.channels),a=(0,b.VN)(),r=n.reduce(((t,n)=>n.contents?((0,C.Xw)(n.contents,a)&&t.push({...n,contents:e.context?(0,C.Cm)(n.contents,e.context):n.contents}),t):[]),[]),o=r.findIndex((e=>e.default));return{channels:r,defaultChannelIndex:o>=0?o:void 0,hasMore:!(null===(t=e.paging)||void 0===t||!t.hasNextPage)}};var I=n(99141),E=n(7911),R=n(84993);const w=e=>(null==e?void 0:e.displayTemplate)===(0,R.b)().TEMPLATE.LIVE_GRID&&!(null==e||!e.displayOnlyFavoriteChannels),S=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter((e=>!w(e)))};var G=n(78790);var N=n(23218),Q=n(83562);var A=n(56932);var M=n(27981);async function D(e){var t,n;let a,{data:{json:r},formatterProps:o,template:i}=e;switch(i){case P.Q.ContentRowLive:a=k(r);break;case P.Q.ContentRowPerso:return k(r);case P.Q.ContentRowPersoContainer:a=((e,t)=>{const{contents:n,currentPage:a}=e||{},r=(0,h.Z)(n);return{contents:r?(0,C.R5)(r,t):void 0,type:null==a?void 0:a.perso}})(r,null==o?void 0:o.trackingContext);break;case P.Q.DownloadToGo:a={currentPage:r.currentPage,tracking:r.tracking};break;case P.Q.EPG:a={type:r.type,timeSlices:r.timeSlices,rubriques:r.rubriques};break;case P.Q.EPGGrid:a=((e,t)=>{const n=e.channels.filter((e=>!(!e.URLLogoChannel||!e.URLChannelSchedule||null!=t&&t.includes((0,E.O)(e.URLChannelSchedule)))));return{...e,channels:n}})(r,null==o?void 0:o.blackListedChannels);break;case P.Q.GabaritList:a=((e,t)=>{const{currentPage:n,rubriques:a=[],displayParameters:r}=e;return{currentPage:n,displayParameters:r,rubriques:t?a:S(a)}})(r,!(null==o||!o.isLiveGridFavoritesEnabled));break;case P.Q.LandingV5:a=(0,G.PL)(r,null==o?void 0:o.dispatch);break;case P.Q.LiveGrid:a=(e=>{const{channels:t=[],context:n,features:a=[],currentPage:r,paging:o,tracking:i}=e||{};return{channels:t,context:n,features:a,isAdult:!(null==r||!r.adult),paging:o,tracking:null==i?void 0:i.omniture}})(r);break;case P.Q.SectionsList:a={currentPage:(c=r).currentPage,strates:null==c?void 0:c.strates.filter((e=>{let{type:t}=e;return t!==v.ContentType.Profiles})),tracking:c.tracking};break;case P.Q.SearchStandalone:a=(e=>{const{currentPage:t,tracking:n}=e||{};return{currentPage:t,tracking:n}})(r);break;case P.Q.MultiLive:a=(e=>{const{button:{title:t=""}={},channels:n=[],text:a,title:r,tracking:o}=e||{};return{buttonText:t,channels:n,text:a,title:r,tracking:null==o?void 0:o.omniture}})(r);break;case P.Q.Mosaic:a=(e=>({contents:e.contents,ratio:A.Nm,pagination:e.paging}))(r);break;case P.Q.MoreInfos:a=(e=>{const{currentPage:t,copyright:n,strates:a,selector:r}=e;return{currentPage:t,copyright:n,strates:null==a?void 0:a.map(((e,t)=>{var n;const a=null===(n=e.contents)||void 0===n?void 0:n.map(((e,t)=>({...e,reactKey:t.toString()})));return{...e,contents:a,reactKey:t.toString()}})),selector:r}})(r);break;case P.Q.LiveTv:a=(0,Q.Y)(r,o.activeRubricDisplayName);break;case P.Q.LiveGridFavoritesContainer:case P.Q.LiveGridFavorites:a=(0,N.h)(r);break;case P.Q.Stub:a=(e=>{const{text:t,title:n,URLImage:a,button:{onClick:r}={}}=e||{};return{text:t,title:n,URLImage:a,onClick:r}})(r);break;case P.Q.ContentGrid:a=(0,f.e)(r);break;case P.Q.ContentRowStandard:s=r,a={contents:(0,h.Z)(s.contents).map((e=>e.onClick?(0,C.pu)(e,s.context):e)),URLNextPage:null===(l=s.paging)||void 0===l?void 0:l.URLPage};break;case P.Q.MyAccountIdp:a=(e=>{const{currentPage:t,strates:n,tracking:a}=e||{};return{displayName:(null==t?void 0:t.displayName)||"",strates:n,tracking:a}})(r);break;case P.Q.EpisodeContainer:a={episodes:r.episodes};break;case P.Q.SearchContainer:a=(e=>{const{contents:t,displayParameters:n,currentPage:a,tracking:r,context:o}=e,{displayNBOLogo:i,imageRatio:s}=n;return{contents:t.map((e=>e.onClick?(0,C.pu)(e,o):e)),displayParameters:{displayNBOLogo:i,imageRatio:(0,A.wQ)(s)?s:void 0},title:a.query,tracking:null==r?void 0:r.omniture}})(r);break;case P.Q.ShowcaseContainer:a=(e=>{const{strates:t}=e,n=t?(e=>(0,h.Z)(e).map((e=>{switch(e.type){case M.mJ.TEXT:case M.mJ.TILES:case M.mJ.CONTENTGRID:return"contents"in e?{...e,contents:(0,h.Z)(e.contents)}:void 0;case M.mJ.CONTENTROW:if(!("contents"in e))return;return"context"in e?{...e,contents:(0,C.R5)(e.contents,e.context)}:{...e,contents:(0,C.R5)(e.contents)};default:return e}})))(t):void 0;return{...e,strates:n}})(r);break;case P.Q.DetailV5:a=(0,I.q)(r);break;case P.Q.EpisodeListContainer:case P.Q.EpisodeList:case P.Q.PrivacyManager:case P.Q.TextBrut:case P.Q.ActionLayout:case P.Q.FunnelPaymentV5:default:a={...r,tracking:(null===(t=r.tracking)||void 0===t?void 0:t.omniture)||(null===(n=r.tracking)||void 0===n?void 0:n.dataLayer)}}var s,l,c;return"currentPage"in a||(a={...a,currentPage:r.currentPage}),"meta"in a||(a={...a,meta:r.meta}),a}async function O(e){let t,{url:n,fetchDetails:a,formatterProps:r}=e;const{options:o,headers:i,template:s}=a,l=null!=o&&o.requestId?{requestId:o.requestId}:void 0;if(!n||"string"!=typeof n)throw new Error("The url must be a string and not empty");try{switch(s){case P.Q.LiveGrid:case P.Q.MultiLive:case P.Q.ContentGridPerso:case P.Q.LiveGridFavorites:case P.Q.MyAccountIdp:{let e=i;if(null!=o&&o.isPerso){var c;const t=await(0,m.B)();e={"XX-Profile-Id":null===(c=a.options)||void 0===c?void 0:c.profileId,tokenPass:t}}t=await v.Hodor.requestPage(n,l,e);break}case P.Q.LiveGridFavoritesContainer:case P.Q.FunnelPaymentV5:{var d;let e=i;const r=await(0,m.B)();e={"XX-Profile-Id":null===(d=a.options)||void 0===d?void 0:d.profileId,tokenPass:r},t=await v.Hodor.requestPage(n,l,e);break}case P.Q.ContentRowPersoContainer:case P.Q.ContentRowPerso:{const{dispatch:e}=r||{},{profileId:o,offerLocation:i,offerZone:s}=a.options||{};if(!e)throw new Error("No dispatch provided");const l=await(0,L.nX)((e=>{let{headers:t}=e;return v.Hodor.requestPage(n,void 0,t)}),e,i,s,null==o?void 0:o.toString());t=null!==l&&(0,L.qr)(l)&&l||void 0;break}case P.Q.EpisodeListContainer:if(void 0===(null==o?void 0:o.profileId))t={json:await v.Hodor.getEpisodesLists(n,"",0),response:{}};else{const e=await(0,m.B)();t={json:await v.Hodor.getEpisodesLists(n,e,+o.profileId),response:{}}}break;case P.Q.EpisodeContainer:case P.Q.EpisodeList:{if(void 0===(null==o?void 0:o.profileId))throw new Error("No profileId provided");const e=await(0,m.B)();t={json:await v.Hodor.getEpisodesLists(n,e,+o.profileId),response:{}};break}case P.Q.ActionLayout:{if(void 0===(null==o?void 0:o.profileId))throw new Error("No profileId provided");const e=await(0,m.B)();t={json:await v.Hodor.getActionLayout(n,e,+o.profileId),response:{}};break}default:t=await v.Hodor.requestPage(n,l,i)}}catch{var u;const e=null!==(u=y.find((e=>{let{template:t}=e;return t===s})))&&void 0!==u?u:T;throw new Error(e.message)}if(void 0===t)throw new Error("No response provided");return D({data:t,formatterProps:r||{},template:s})}const x=function(e,t,n,d){const{updateTracking:v}=(0,g.r)(),m=(0,p.T)(),{routingContext:L,template:P,options:y}=t,{profileId:T,isPerso:f,queryKeyPrefix:h}=y||{},b=(0,r.useMemo)((()=>`${P}-${u().v4()}`),[P]);e||s.ZP.debug(`Your url is undefined, a randomKey was generated: ${b}`);const{onSuccess:C,...k}=n||{};let I=e?[e,T,f].filter(Boolean):[b];h&&(I=[h,...I]);const{data:E,isFetchedAfterMount:R,...w}=(0,o.useQuery)(I,(()=>O({url:e,fetchDetails:t,formatterProps:d})),{onSuccess(e){const{tracking:t,meta:n,currentPage:a}=e||{};var r,o;R||(n&&a&&m((0,c.KD)(n,a.displayTemplate,a.displayName,(0,l.t2)(a.displayTemplate)&&(null===(r=e.detail.cover)||void 0===r||null===(o=r.regularImage)||void 0===o?void 0:o.URLImage)||void 0)),v(t,L));null==C||C(e)},cacheTime:e?i.w:0,...k});var S,G;return!(0,a.Z)()&&null!=E&&E.meta&&null!=E&&E.currentPage&&m((0,c.KD)(E.meta,E.currentPage.displayTemplate,E.currentPage.displayName,(0,l.t2)(E.currentPage.displayTemplate)&&(null===(S=E.detail.cover)||void 0===S||null===(G=S.regularImage)||void 0===G?void 0:G.URLImage)||void 0)),v(null==E?void 0:E.tracking,L),{data:E,isFetchedAfterMount:R,queryKey:I,...w}}},51626:(e,t,n)=>{let a;n.d(t,{Q:()=>a}),function(e){e.ActionLayout="ActionLayout",e.ContentGrid="ContentGrid",e.ContentGridPerso="ContentGridPerso",e.ContentGridTrailer="ContentGridTrailer",e.ContentRowLive="ContentRowLive",e.ContentRowPerso="ContentRowPerso",e.ContentRowPersoContainer="ContentRowPersoContainer",e.ContentRowStandard="ContentRowStandard",e.DetailV5="DetailV5",e.DownloadToGo="DownloadToGo",e.EPG="EPG",e.EPGGrid="EPGGrid",e.EpisodeContainer="EpisodeContainer",e.EpisodeList="EpisodeList",e.EpisodeListContainer="EpisodeListEpisodeContainer",e.FunnelPaymentV5="FunnelPaymentV5",e.GabaritList="GabaritList",e.LandingV5="LandingV5",e.LiveGrid="LiveGrid",e.LiveGridFavorites="LiveGridFavorites",e.LiveGridFavoritesContainer="LiveGridFavoritesContainer",e.LiveTv="LiveTv",e.MoreInfos="MoreInfos",e.Mosaic="Mosaic",e.MultiLive="MultiLive",e.MyAccountIdp="MyAccountIdp",e.PrivacyManager="PrivacyManager",e.SearchContainer="SearchContainer",e.SearchStandalone="SearchStandalone",e.SectionsList="SectionsList",e.ShowcaseContainer="ShowcaseContainer",e.Stub="Stub",e.TextBrut="TextBrut"}(a||(a={}))},3444:(e,t,n)=>{n.d(t,{r:()=>P});var a=n(7948),r=n(40698),o=n(49318),i=n(31337),s=n(57310),l=n(64176),c=n(42417),d=n(33991),u=n(5255),p=n(56321),g=n(15294),v=n(18149),m=n.n(v),L=n(2784);const P=()=>{const e=(0,r.I0)(),t=(0,r.v9)(l.ts),n=(0,r.v9)(u.hM),v=(0,r.v9)(u.HJ),P=(0,r.v9)(d.MY),y=(0,r.v9)(u.Bg),T=(0,r.v9)(l.bK),f=(0,r.v9)(c.um),h=(0,L.useRef)({});return{updateTracking:(r,l,c)=>{const d=l===o.WN.CONTEXT_IMMERSIVE;if(!r||!(0,a.Z)()||f&&!d)return;const{favoritesEpgIds:u}=c||{},{data:L}=(0,s.RW)({abTestingPopulation:n,...u&&{favoritesEpgIds:u},isKids:y,obj:r,offerLocation:t,pageURL:P,segType:v,themeColor:i.t.Dark});!m()(L,h.current)&&(h.current=L,e(d?(0,p.bg)(L):(0,g.Ob)(L)))},sendPlayTracking:(e,t)=>{if(!e)return;const{platform:a,startFromBeginning:r}=t||{};(0,s.Jy)({abTestingPopulation:n,isKids:y,pageURL:P,platform:a,segType:v,startFromBeginning:r,themeColor:i.t.Dark,tracking:e,version:T})}}}},60250:(e,t,n)=>{n.d(t,{i:()=>r,N:()=>o});var a=n(18457);const r=e=>e?e.map((e=>{let{currentProgram:t,epgId:n,logoUrl:a}=e;const{title:r,subtitle:o,pictureBig:i,startTime:s,endTime:l,isStartOverAuthorized:c}=t;return{title:r,subtitle:o,URLImage:i,startTime:s&&s.getTime()/1e3,endTime:l&&l.getTime()/1e3,channel:{epgID:n,isStartOverAuthorized:c,LogoUrl:a}}})):[],o=(e,t)=>{const n=t||a.yU.TOUTES_LES_CHAINES,r=`${e.prop5} - ${n}`;return{...e,prop6:r,pageName:r}}},17147:(e,t,n)=>{n.d(t,{V:()=>u,e:()=>d});var a=n(59909),r=n(56932),o=n(24577),i=n(7782),s=n(68178),l=n(20337);const c=e=>"object"==typeof(null==e?void 0:e.omniture),d=e=>{const{context:t,contents:n,tracking:o,paging:i,displayParameters:s,currentPage:d}=e||{},{imageRatio:u,displayNBOLogo:p,titleDisplayMode:g,imageSize:v}=s||{},m=(0,a.Z)(n);return{contents:null==m?void 0:m.map((e=>e.onClick?(0,l.pu)(e,t):e)),currentPage:d,displayParameters:{imageRatio:(0,r.wQ)(u)?u:r.T_.Ratio169,displayNBOLogo:p,titleDisplayMode:g,imageSize:v||"normal"},tracking:c(o)?o.omniture:void 0,paging:i}},u=(e,t)=>e&&"string"==typeof e&&t===i.Template.GabaritList?(0,o.Z)(e,"get",String(s.$E)):e},99141:(e,t,n)=>{n.d(t,{_:()=>i,q:()=>s});var a=n(24577),r=n(9088),o=n(84993);const i=e=>e?(0,a.Z)(e,r.Sq,"detailV5"):"",s=e=>{var t;if(null==e||null===(t=e.tabs)||void 0===t||!t.length)return e;const n=(0,o.b)(),{tabs:a,detail:{moreInfos:r}}=e,i=a.filter((e=>"Acheter"!==e.displayName)),s=i.findIndex((e=>e.displayTemplate===n.TEMPLATE.MORE_INFOS))>=0;return!r||s?e:{...e,tabs:[...i,{...r,displayName:r.label}]}}},7911:(e,t,n)=>{n.d(t,{O:()=>a});const a=e=>parseInt(e.split("/").slice(-4,-3)[0],10)},78790:(e,t,n)=>{n.d(t,{L$:()=>v,PL:()=>g});var a=n(88604),r=n(73617),o=n(59909),i=n(24577),s=n(7782),l=n(20337),c=n(15294);const d=(0,a.Z)(s.TitleDisplayModes),u=(0,a.Z)(s.Template),p=e=>!(null==e||!e.type),g=(e,t)=>{var n,a,i,s;const{covers:g,strates:v=[],tracking:m}=e||{},L=!(null==(P=g)||null===(y=P[0])||void 0===y||!y.contents)&&(e=>!!(null!=e&&e.label||null!=e&&e.onClick||null!=e&&e.URLImage||null!=e&&e.URLImageRegular))(null==g||null===(n=g[0])||void 0===n||null===(a=n.contents)||void 0===a?void 0:a[0])&&(null==g||null===(i=g[0])||void 0===i||null===(s=i.contents)||void 0===s?void 0:s[0]);var P,y;const{label:T,onClick:f,URLImage:h,URLImageRegular:b}=L||{},C=L?{image:h||b||"",label:T,...f&&{onClick:{...f,...u(f.displayTemplate)&&{context:(0,l.kr)(f.displayTemplate)}}}}:void 0;C&&t&&t((0,c.ag)(C));const k=v.filter(p).map(((e,t)=>{const n=0===t&&!!C,a=(0,r.Z)(e),i=(0,o.Z)(a.contents),{displayParameters:{titleDisplayMode:s}={}}=a,c=a.displayParameters&&{...a.displayParameters,titleDisplayMode:s&&d(s)?s:void 0};return{...a,title:!n&&a.title||void 0,button:(0,l.s2)(a.button||{}),contents:(0,l.R5)(i,a.context),displayParameters:c}}));return{cover:C,strates:k,tracking:null==m?void 0:m.omniture}},v=(e,t)=>(0,i.Z)(e,"get",String(t?10:14))},23218:(e,t,n)=>{n.d(t,{h:()=>a,u:()=>r});const a=e=>{const{channels:t=[]}=e||{};return{channels:t}},r=e=>({contentIds:e.map(String)})},83562:(e,t,n)=>{n.d(t,{O:()=>c,Y:()=>l});var a=n(7782),r=n(34126),o=n(18457),i=n(60250),s=n(30959);const l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const{currentPage:n,tracking:a}=e||{},{omniture:r}=a;return{title:n.displayName,tracking:t&&r?(0,i.N)(r,t):void 0}},c=e=>{let{t,rubrics:n,location:i}=e;const l=a.Template.LiveTv,{theme:c}=r.parse(i.search),d=(0,s.RW)(c),u=(0,s.Yo)(c),p=!!n.length&&[{id:0,name:t("LiveTV.allChannels")}].concat(n);return p?p.map((e=>{let{name:t,id:n,isAdult:a}=e;return{default:!d&&t===o.yU.TOUTES_LES_CHAINES||t===u,displayName:t,displayTemplate:l,isAdult:!!a,id:n,idRubrique:n,path:`${i.pathname}?theme=${n}-${t}`}})):[]}}}]);
//# sourceMappingURL=1453.52b6a234c314b8642eb6.js.map